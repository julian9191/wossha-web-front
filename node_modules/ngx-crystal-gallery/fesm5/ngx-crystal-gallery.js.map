{"version":3,"file":"ngx-crystal-gallery.js.map","sources":["ng://ngx-crystal-gallery/lib/lightbox.component.ts","ng://ngx-crystal-gallery/lib/lightbox-mobile.component.ts","ng://ngx-crystal-gallery/lib/config.ts","ng://ngx-crystal-gallery/lib/dom.service.ts","ng://ngx-crystal-gallery/lib/gallery.component.ts","ng://ngx-crystal-gallery/lib/masonry-layout.component.ts","ng://ngx-crystal-gallery/lib/pinch.directive.ts","ng://ngx-crystal-gallery/lib/gallery.module.ts"],"sourcesContent":["import { \n    Component, \n    Input, \n    EventEmitter, \n    OnInit, \n    HostBinding, \n    HostListener, \n    ViewChild, \n    ElementRef, \n    ChangeDetectorRef } from '@angular/core';\n\n@Component({\n    selector: 'crystal-lightbox',\n    template: `<div class=\"cg-counter\" *ngIf=\"config.counter && images.length > 1\">{{counter}}</div>\n<div class=\"cg-description\" *ngIf=\"description\">{{description}}</div>\n\n<div \n\tclass=\"cg-close\" \n\t(click)=\"closeLightbox()\">Close</div>\n\n<div \n\tclass=\"cg-spinner\" \n\t *ngIf=\"!currImageLoaded\"></div>\n\n<div class=\"cg-wrapper\" #wrapper>\n\t<img \n\t\tclass=\"cg-curr-image\" \n\t\t#currImageElem \n\t\t[src]=\"currImagePath?.full\" \n\t\t[class.cg-show]=\"currImageLoaded\" \n\t\t(load)=\"onImageLoaded()\" />\n</div>\n\n<div \n\tclass=\"cg-prev\" \n\t[hidden]=\"isFirst && !config.loop\" \n\t(click)=\"prev()\"></div>\n<div \n\tclass=\"cg-next\" \n\t[hidden]=\"isLast && !config.loop\" \n\t(click)=\"next()\"></div>`,\n    styles: [`._cg-spinner,._cg-spinner:after{border-radius:50%;width:36px;height:36px}._cg-spinner{margin:0 auto;font-size:10px;position:relative;text-indent:-9999em;border-top:4px solid rgba(255,255,255,.2);border-right:4px solid rgba(255,255,255,.2);border-bottom:4px solid rgba(255,255,255,.2);border-left:4px solid #fff;-webkit-transform:translateZ(0);transform:translateZ(0);-webkit-animation:.9s linear infinite load8;animation:.9s linear infinite load8}@-webkit-keyframes load8{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes load8{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.cg-spinner,.cg-spinner:after,.cg-spinner:before{border-radius:50%;width:10px;height:10px;-webkit-animation:1.5s ease-in-out infinite load7;animation:1.5s ease-in-out infinite load7}.cg-spinner{color:#fff;font-size:10px;margin:0 auto 20px;position:relative;text-indent:-9999em;-webkit-transform:translateZ(0);transform:translateZ(0);-webkit-animation-delay:-.16s;animation-delay:-.16s}.cg-spinner:after,.cg-spinner:before{content:\"\";position:absolute;top:0}.cg-spinner:before{left:-3em;-webkit-animation-delay:-.32s;animation-delay:-.32s}.cg-spinner:after{left:3em}@-webkit-keyframes load7{0%,100%,80%{box-shadow:0 2.5em 0 -1.3em}40%{box-shadow:0 2.5em 0 0}}@keyframes load7{0%,100%,80%{box-shadow:0 10px 0 -1.3em}40%{box-shadow:0 10px 0 0}}:host(.cg-show){opacity:1}:host(.cg-hide-controls) .cg-close,:host(.cg-hide-controls) .cg-next,:host(.cg-hide-controls) .cg-prev{opacity:0}:host{opacity:0;position:fixed;top:0;left:0;width:100%;height:100%;color:#fff;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:opacity .1s cubic-bezier(.645,.045,.355,1);z-index:10000;background-color:rgba(0,0,0,.85)}:host img{opacity:1;max-width:100%;max-height:100%;box-shadow:0 4px 15px 2px rgba(0,0,0,.35)}:host img.cg-curr-image.cg-show{opacity:1}:host img.cg-curr-image{opacity:0;z-index:10}:host .cg-wrapper.cg-hide{display:none}:host .cg-wrapper{display:flex;align-items:center;justify-content:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;top:0;left:0;width:100%;height:100%}:host .cg-spinner{position:absolute;top:50%;left:50%;margin-top:-15px;margin-left:-5px}:host .cg-counter{text-align:left;position:absolute;left:22px;top:13px;font-size:14px;text-shadow:0 0 1px rgba(0,0,0,.65);z-index:30}:host .cg-description{text-align:center;max-width:calc(100% - 200px);margin:0 auto;font-size:14px;line-height:43px;position:relative;z-index:50}:host .cg-close{position:absolute;top:0;right:0;padding:13px 22px;font-size:13px;text-transform:uppercase;cursor:pointer;opacity:.5;z-index:30;transition:opacity .1s ease-in-out;text-shadow:0 0 1px rgba(0,0,0,.65)}:host .cg-close:hover{opacity:1}:host .cg-next,:host .cg-prev{width:40%;height:100%;position:absolute;top:0;cursor:pointer;opacity:.5;z-index:20;transition:opacity .1s ease-in-out;-webkit-tap-highlight-color:rgba(255,255,255,0)}:host .cg-next:hover,:host .cg-prev:hover{opacity:1}:host .cg-prev{left:0;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAiCAYAAABbXymAAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjMzMTZCQzFERDgzMTExRTc5QUYxQTUxRDI5MkM5ODZCIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjMzMTZCQzFFRDgzMTExRTc5QUYxQTUxRDI5MkM5ODZCIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MzMxNkJDMUJEODMxMTFFNzlBRjFBNTFEMjkyQzk4NkIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MzMxNkJDMUNEODMxMTFFNzlBRjFBNTFEMjkyQzk4NkIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7VrwZKAAAClElEQVR42qzWSY8SQRgGYLoVHPeTXlwCiIwMArJGtiABNep4IGZi4oEfMJooLjePrnFGf5yJS0hYmq2b/aBxiQ6+lRRJdaUZq5vp5E2TLnioVFd9VZLN+iUxIdeMiW2fRVCmvz2DpJBVCk6X6SVBHQRLpVKb7Xb782g0Usrl8jM8W0P20+9YQn3JZPIhwN6MXoPBoI3nG8iKGZhF14A+AqrOmKtWq31F213kkOgQ69B0Ol0BqrFot9vV/H7/c7RfEoVZ1G+EdjqdvtfrfYn2K8gJkaHQodlstjIej/ssihdH0Ddov4acQo7QlycJo5PJhEc1j8fzmqJk2h1D7Lv1lkUv5nK5xzzaarWMUIcwms/nCTrgUbfbTdCrVtAAQafTqQ5VFEVdCi0UCk/Q0yGLNptN1el0vqLoaRHUxqPoKY/2KFo0g0r0ba4Wi8WnQEcs2mg0VAPULrJsZTqpNzDZ6yxar9dVl8tFVtR10SnFohJdgnZYuh9IkjSTZfknPn5DviO/kL/IjkgtIOhhJJ7JZF5gdU24hdDG6qqg/QJywEzlmg/FSTLhE4nE9nA4nHJFRvH5fJto94gOBfvyjtJxXI/H4x+A63re6/UUVDCCnzeDz6fbceQscjsWi703wFsM7hDBJQN8PRqNbmNn0OGapu0JfoviYx4PBAL30e5dCg+Hw0Z4e8/wfr/P451QKPRgaRzIFjDdksefsbjdKn5zER6JRMiwuP+3Ne2KB4PBLVVVR1xd+YK2O2bOFYvwd8CHbK/x/J6Zc8Ui/AZmxdtqtdrAwlFLpRLZrS/PYcnkEUuiY7hCS+g5sovT55+Qj7QS/jYD8zjp/UF6t9GS+oPed8zCLC5zJ0tSo//Q+8wKLHTw/ifAAMQVS4vHZR2VAAAAAElFTkSuQmCC) center left 22px no-repeat}:host .cg-next{right:0;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAiCAYAAABbXymAAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjEyNDE3MDE1RDgzMTExRTc5NjM4QTIzQzI2Rjc2Qjg2IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjEyNDE3MDE2RDgzMTExRTc5NjM4QTIzQzI2Rjc2Qjg2Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MTI0MTcwMTNEODMxMTFFNzk2MzhBMjNDMjZGNzZCODYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MTI0MTcwMTREODMxMTFFNzk2MzhBMjNDMjZGNzZCODYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7zv5BKAAACl0lEQVR42rTW224SQRwGcHZb8FT1Sm88BJCiFAE5JpyCBNRE8coYEy94AGqi9XDXS0+JVh/CB/EhiFET5LjAclgWjaa1aazfJDM6u6LuLjrJl2124cd0duY/I9h+NoELabtcTLcFCon0bw+SRE4h28hn2xyNoIvISrlcfqAoSluSpLepVKqCe6cRB/2MYAXei1wfjUbSLm34gX4ymbyN+z6rOBmC/ciNer3+fpdrwGXgd8h/YwVn8Dm/37/e6/UGOnyQTqfXrOBsKI4g571e76Nutzv8De43gwv05S0hx5CLwJ/iBWrwyWQyzGazpnHyITtyCDlBcI/H8wS4ZlhUVbWMO/R4p9P5Bc/lcnfx/Ow8+AW32z0LH+Xz+X+Dt9ttmcen0ynDA1bx4wR3Op2PW62WrOv5uFAo3JsXL1K8r+v5LNxmZrb8wJvNpn5YlGKxeJ/WFruZBcRPxUsul2u90WhocCyqBqk3dLGJiwbgb/T6FflCSqkoiluCIGjqNGzWgQUz9YR8aQ9yBqtyDQtH0q1KNZPJPMTzOHKA4oaHwuPz+SooUm0eHY/H00QisUEWFHKUDYVRdBmVr9Lv9/WoGo/HX+J5iY7/QSMvj003hnb0aCwWe4HnV5GTyGEj002DDgYDDYqdRo1Goxu0p3pU+BvqDQQCqzPQCUWvzINKejQcDltHQ6HQLaBdHh0Oh5ZRO0OBaFD8iIL7z82ibGtyRyKR1T+gl82g/GZ6Dev/HY/KsqwEg0FLKL/93+R7C3QM9Nk8KDtiOWq12jb2s2XS01Kp9Kparb7G/TfIR2QT2TF6UBS42bBEi/UK/SIBPyCfkC0zKA+z6rWPXm30tLlJr6ZQ/ZmYDYnI1eEdejV9Thb+18H7uwADAOG/Wcm4x+knAAAAAElFTkSuQmCC) center right 22px no-repeat}`]\n})\nexport class LightboxComponent {\n    _index: any;\n    prevIndex: any;\n    currImageLoaded: any; \n    prevImageHide: any;\n    wrapperProp: any;\n    _data: any;\n    currentImageIndex: number = 0;\n    spinnerHeight: number = 30;\n    descriptionHeight: number = 43;\n\n    @Input() data: any;\n\n    close = new EventEmitter();\n\n    @HostBinding('class.cg-show') showLightbox: boolean = false;\n    @HostBinding('class.cg-hide-controls') hideControls: boolean = false;\n    @HostBinding('style.transition') hostStyleTransition: string;\n    @HostBinding('style.backgroundColor') hostStyleBackgroundColor: string;\n\n    @ViewChild('currImageElem') currImageElem: ElementRef;\n    @ViewChild('prevImageElem') prevImageElem: ElementRef;\n    @ViewChild('wrapper') wrapperElem: ElementRef;\n\n    get images(){\n        return this.data.images;\n    }\n\n    get config(){\n        return this.data.config;\n    }\n\n    get index(){\n        return this.currentImageIndex;\n    }\n\n    get currImagePath(){\n        let image = this.images[this.index];\n\n        if (!image){\n            return false;\n        }\n\n        if (image.path){\n            image.full = image.path;\n        }\n\n        return image;\n    }\n\n    get prevImagePath(){\n        return this.images[this.prevIndex];\n    }\n\n    set prevImagePath(value: any){\n        this.images[this.prevIndex] = value;\n    }\n\n    get isFirst(){\n        return this.index === 0;\n    }\n\n    get isLast(){\n        return this.index === (this.images.length-1);\n    }\n\n    get latestImageIndex(){\n        return this.images.length - 1;\n    }\n\n    get description(){\n        return this.images[this.index].description;\n    }\n\n    get counter(){\n        return this.currentImageIndex + 1 +'/'+ this.images.length;\n    }\n\n    @HostListener('window:keydown', ['$event'])\n    onKeyDown(event: any) {\n        switch(event.key) {\n            case 'ArrowLeft':\n                this.prev();\n                break;\n            case 'ArrowRight':\n                this.next();\n                break;\n            case 'Escape':\n                this.closeLightbox();\n                break;\n        }\n    }\n\n    @HostListener(\"mouseenter\", ['$event'])\n    onMouseEnter(event: any) {\n        this.hideControls = false;\n    }\n\n    constructor(private elementRef: ElementRef, private ref: ChangeDetectorRef){\n    }\n\n    ngOnInit(){\n        this.setBackgroundOpacity(this.config.backgroundOpacity);\n        this.currentImageIndex = this.config.index;\n        //document.body.style.overflow = 'hidden';\n\n        setTimeout(() => {\n            this.showLightbox = true;\n        }, 30);\n\n        this.setMaxDimensions();\n        this.setAnimationDuration();\n    }\n\n    closeLightbox(){\n        this.showLightbox = false;\n        setTimeout(() => {\n           this.close.emit('close');\n           //document.body.style.overflow = '';\n        }, this.config.animationDuration); \n    }\n\n    next(){\n        if (this.isLast){\n            if (this.config.loop){\n                this.currentImageIndex = 0;\n            } else {\n                return;\n            }\n        } else {\n            this.currentImageIndex++;\n        }\n        this.currImageLoaded = 'loading';\n\n        setTimeout(() => {\n            if (this.currImageLoaded === 'loading'){\n                this.currImageLoaded = false;\n            }\n        }, 50);\n\n        this.setMaxDimensions();\n    }\n    prev(){\n        if (this.isFirst){\n            if (this.config.loop){\n                this.currentImageIndex = this.latestImageIndex;\n            } else {\n                return;\n            }\n        } else {\n            this.currentImageIndex--;\n        }\n\n        setTimeout(() => {\n            if (this.currImageLoaded === 'loading'){\n                this.currImageLoaded = false;\n            }\n        }, 50);\n\n        this.setMaxDimensions();\n    }\n\n    onImageLoaded(){\n        this.currImageLoaded = true;\n        this.ref.detectChanges();\n    }\n\n    setBackgroundOpacity(opacity: any){\n        this.hostStyleBackgroundColor = 'rgba(0, 0, 0, '+opacity+')';\n    }\n\n    setMaxDimensions(){\n        if (this.description){\n            this.wrapperElem.nativeElement.style.height = 'calc(100% - ' + (this.descriptionHeight * 2) + 'px)';\n        } else {\n            this.wrapperElem.nativeElement.style.height = '';\n        }\n\n        this.currImageElem.nativeElement.style.maxHeight = 'calc(' + this.config.lightboxMaxHeight + ')';\n        this.currImageElem.nativeElement.style.maxWidth = this.config.lightboxMaxWidth;\n    }\n\n    setAnimationDuration(){\n        this.hostStyleTransition = 'opacity '+this.config.animationDuration+'ms';\n    }\n}","import { Component, Input, EventEmitter, OnInit, HostBinding, HostListener, ViewChild, ElementRef, ChangeDetectorRef } from '@angular/core';\n\n@Component({\n\tselector: 'crystal-lightbox-mobile',\n\ttemplate: `<div class=\"cg-back\" (click)=\"closeLightbox()\"></div>\n\n<div \n\tclass=\"cg-wrapper\" \n\t[class.cg-landscape]=\"landscapeMode\"\n\tpinch [isLast]=\"isLast\" [isFirst]=\"isFirst\" (events)=\"handlePinchEvents($event)\"\n\t#wrapper>\n\t<div class=\"cg-image-wrap cg-prev-image\">\n\t\t<img \n\t\t\t*ngIf=\"prevImagePath\"\n\t\t\t[src]=\"prevImagePath.full\" \n\t\t\t[class.cg-hide]=\"!prevImage.loaded\"\n\t\t\t(load)=\"onImageLoaded('prevImage')\"\n\t\t/>\n\t\t<div class=\"cg-spinner\" *ngIf=\"!prevImage.loaded && prevImagePath\"></div>\n\t</div>\n\n\t<div class=\"cg-image-wrap cg-curr-image\" *ngIf=\"currImage.show\">\n\t\t<img \n\t\t\t[src]=\"currImagePath?.full\" \n\t\t\t[class.cg-hide]=\"!currImage.loaded\" \n\t\t\t(load)=\"onImageLoaded('currImage')\"\n\t\t/>\n\t\t<div class=\"cg-spinner\" *ngIf=\"!currImage.loaded\"></div>\n\t</div>\n\t\n\t<div class=\"cg-image-wrap cg-next-image\">\n\t\t<img \n\t\t\t*ngIf=\"nextImagePath\"\n\t\t\t[src]=\"nextImagePath.full\" \n\t\t\t[class.cg-hide]=\"!nextImage.loaded\" \n\t\t\t(load)=\"onImageLoaded('nextImage')\"\n\t\t/>\n\t\t<div class=\"cg-spinner\" *ngIf=\"!nextImage.loaded && nextImagePath\"></div>\n\t</div>\n</div>`,\n    styles: [`._cg-spinner,._cg-spinner:after{border-radius:50%;width:36px;height:36px}._cg-spinner{margin:0 auto;font-size:10px;position:relative;text-indent:-9999em;border-top:4px solid rgba(255,255,255,.2);border-right:4px solid rgba(255,255,255,.2);border-bottom:4px solid rgba(255,255,255,.2);border-left:4px solid #fff;-webkit-transform:translateZ(0);transform:translateZ(0);-webkit-animation:.9s linear infinite load8;animation:.9s linear infinite load8}@-webkit-keyframes load8{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes load8{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.cg-spinner,.cg-spinner:after,.cg-spinner:before{border-radius:50%;width:10px;height:10px;-webkit-animation:1.5s ease-in-out infinite load7;animation:1.5s ease-in-out infinite load7}.cg-spinner{color:#fff;font-size:10px;margin:0 auto 20px;position:relative;text-indent:-9999em;-webkit-transform:translateZ(0);transform:translateZ(0);-webkit-animation-delay:-.16s;animation-delay:-.16s}.cg-spinner:after,.cg-spinner:before{content:\"\";position:absolute;top:0}.cg-spinner:before{left:-3em;-webkit-animation-delay:-.32s;animation-delay:-.32s}.cg-spinner:after{left:3em}@-webkit-keyframes load7{0%,100%,80%{box-shadow:0 2.5em 0 -1.3em}40%{box-shadow:0 2.5em 0 0}}@keyframes load7{0%,100%,80%{box-shadow:0 10px 0 -1.3em}40%{box-shadow:0 10px 0 0}}:host(.cg-show){opacity:1}:host(.cg-hide-controls) .cg-close,:host(.cg-hide-controls) .cg-next,:host(.cg-hide-controls) .cg-prev{opacity:0}:host{opacity:0;position:fixed;top:0;left:0;width:100%;height:100%;color:#fff;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:opacity .2s cubic-bezier(.645,.045,.355,1);z-index:10000;background-color:#000}:host .cg-back{background:url(\"data:image/svg+xml,%3C%3Fxml version%3D%221.0%22 encoding%3D%22UTF-8%22%3F%3E%3Csvg width%3D%2210px%22 height%3D%2216px%22 viewBox%3D%220 0 10 16%22 version%3D%221.1%22 xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22 xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E    %3C!-- Generator%3A sketchtool 40.2 (33826) - http%3A%2F%2Fwww.bohemiancoding.com%2Fsketch --%3E    %3Ctitle%3E11A73872-5EBF-46F6-B7C5-142D47A33339%3C%2Ftitle%3E    %3Cdesc%3ECreated with sketchtool.%3C%2Fdesc%3E    %3Cdefs%3E%3C%2Fdefs%3E    %3Cg id%3D%22Interface-1280-x-800%22 stroke%3D%22none%22 stroke-width%3D%221%22 fill%3D%22none%22 fill-rule%3D%22evenodd%22%3E        %3Cg id%3D%22Lot_viewpage_open%22 transform%3D%22translate(-111.000000%2C -296.000000)%22 fill%3D%22%23FFFFFF%22%3E            %3Cg id%3D%22arrows-16px-1_minimal-left%22 transform%3D%22translate(111.000000%2C 296.000000)%22%3E                %3Cpolygon id%3D%22Shape%22 points%3D%228.1 15.7 0.4 8 8.1 0.3 9.6 1.7 3.3 8 9.6 14.3%22%3E%3C%2Fpolygon%3E            %3C%2Fg%3E        %3C%2Fg%3E    %3C%2Fg%3E%3C%2Fsvg%3E\") center/12px no-repeat;width:40px;height:40px;opacity:.9;position:fixed;top:0;left:0;z-index:1000}:host .cg-wrapper.cg-landscape .cg-image-wrap img{height:100%}:host .cg-wrapper{transition:none;width:100%;height:100%;display:block}:host .cg-wrapper .cg-image-wrap.cg-prev-image{-webkit-transform:translate3d(calc(-100% - 8px),0,0);transform:translate3d(calc(-100% - 8px),0,0)}:host .cg-wrapper .cg-image-wrap.cg-next-image{-webkit-transform:translate3d(calc(100% + 8px),0,0);transform:translate3d(calc(100% + 8px),0,0)}:host .cg-wrapper .cg-image-wrap{width:100%;height:100%;text-align:center;position:absolute;display:flex;align-items:center;justify-content:center}:host .cg-wrapper .cg-image-wrap img{max-width:100%;max-height:100%;width:auto;height:auto;position:relative}:host .cg-wrapper .cg-image-wrap img.cg-hide{display:none}`]\n})\nexport class LightboxMobileComponent { \n\t_index: any;\n    prevIndex: any;\n    nextIndex: any;\n\n    currImage = {\n        show: false,\n        loaded: false,\n        index: 0\n    }; \n\n    prevImage = {\n        loaded: false\n    }; \n\n    nextImage = {\n        loaded: false\n    }; \n\n    wrapperProp: any;\n    landscapeMode: any;\n\n\tclose = new EventEmitter();\n\n    @Input() data: any;\n\n    @ViewChild('wrapper') wrapperEl: ElementRef;\n\n    get images(){\n        return this.data.images;\n    }\n\n    get config(){\n        return this.data.config;\n    }\n\n    get index(){\n        return this.currImage.index;\n    }\n\n    get currImagePath(){\n        let image = this.images[this.index];\n\n        if (!image){\n            return false;\n        }\n\n        if (image.path){\n            image.full = image.path;\n        }\n        \n        return image;\n    }\n\n    get prevImagePath(){\n        if (this.prevIndex < 0 && this.config.loop){\n            this.prevIndex = this.latestImageIndex;\n        }\n\n        let image = this.images[this.prevIndex];\n\n        if (image && image.path){\n            image.full = image.path;\n        }\n        return image;\n    }\n\n    get nextImagePath(){\n        let image = this.images[this.nextIndex];\n\n        if (image && image.path){\n            image.full = image.path;\n        }\n        return image;\n    }\n\n    get isFirst(){\n        if (this.config.loop){\n            return false;\n        } else {\n    \t    return this.index === 0;\n        }\n    }\n\n    get isLast(){\n        if (this.config.loop){\n            return false;\n        } else {\n            return this.index === this.latestImageIndex;\n        }        \n    }\n\n    get latestImageIndex(){\n        return this.images.length - 1;\n    }\n\n    get isLandscape(){\n        return window.innerWidth > window.innerHeight;\n    }\n\n    @HostBinding('class.cg-show') lightboxShown: boolean = false;\n\n    @HostListener('window:resize', ['$event'])\n    onWindowResize(event: any) {\n        this.landscapeMode = this.isLandscape;\n        this.ref.detectChanges();\n    }\n\n    constructor(private elementRef: ElementRef, private ref: ChangeDetectorRef){\n    }\n\n    ngOnInit(){\n        this.currImage.index = this.config.index;\n        this.prevIndex = this.currImage.index-1;\n        this.nextIndex = this.currImage.index+1;\n\n        this.showLightbox();\n    }\n\n    showLightbox(){\n        this.currImage.show = true;\n        setTimeout(() => {\n           this.lightboxShown = true;\n        }, 30);\n    }\n\n\tcloseLightbox(){\n\t\tthis.lightboxShown = false;\n        setTimeout(() => {\n           this.close.emit(true);\n        }, 200); \n\t}\n\n    slide(event: any){\n        if (event === 'next'){\n            \n            if (this.isLast){\n                return;\n            } else {\n                setTimeout(() => {\n                    this.currImage.index++;\n                }, 200); \n            }\n\n            if (this.index === this.latestImageIndex){\n                setTimeout(() => {\n                    this.currImage.index = 0;\n                }, 200); \n            }\n\n            setTimeout(() => {\n                this.afterSlide('next');\n            }, 300); \n        }\n\n        if (event === 'prev'){\n\n            if (this.isFirst){\n                return;\n            } else {\n                setTimeout(() => {\n                    this.currImage.index--;\n                }, 200); \n            }\n\n            if (this.index === 0){\n                setTimeout(() => {\n                    this.currImage.index = this.latestImageIndex;\n                }, 200); \n            }\n\n            setTimeout(() => {\n                this.afterSlide('prev');\n            }, 300); \n        }\n    }\n\n    afterSlide(eventType: any){\n        this.currImage.show = true;\n        \n        if (this.index === this.latestImageIndex && this.config.loop){\n            this.nextIndex = 0;\n        } else {\n            this.nextIndex = this.index+1;\n        }\n\n        if (this.index === 0 && this.config.loop){\n            this.prevIndex = this.latestImageIndex;\n        } else {\n            this.prevIndex = this.index-1;\n        }\n\n        if (eventType === 'prev'){\n\n            if (!this.prevImage.loaded){\n                this.currImage.loaded = false;\n                this.prevImage.loaded = false;\n            }\n            if (!this.currImage.loaded){\n                this.nextImage.loaded = false;\n            }\n        }\n\n        if (eventType === 'next'){\n\n            if (!this.nextImage.loaded){\n                this.currImage.loaded = false;\n                this.nextImage.loaded = false;\n            }\n            if (!this.currImage.loaded){\n                this.prevImage.loaded = false;\n            }\n        }\n\n        this.defaultWrapperPosition();\n        this.ref.detectChanges();\n    }\n\n    onImageLoaded(elem: any){\n        this[elem].loaded = true;\n        this.ref.detectChanges();\n    }\n\n    handlePinchEvents($event){\n        if ($event === 'prev'){\n            this.slide('prev');\n        }\n        if ($event === 'next'){\n            this.slide('next');\n        }\n    }\n\n    defaultWrapperPosition(){\n        let elem = this.wrapperEl.nativeElement;\n        elem.style.transition = 'all 0ms';\n        elem.style.transform = 'matrix(1, 0, 0, 1, 0, 0)';\n        elem.style.webkitTransform = 'matrix(1, 0, 0, 1, 0, 0)';\n    }\n}","export const defaultConfig = {\n\tmasonry: true,\n\tmasonryMaxHeight: 200,\n\tmasonryGutter: 4,\n\tloop: false,\n\tindex: 0,\n\tbackgroundOpacity: 0.85,\n\tcounter: false,\n\tlightboxMaxHeight: \"100%\",\n\tlightboxMaxWidth: \"100%\",\n\tanimationDuration: 100\n}","import {\n    Injectable,\n    Injector,\n    ComponentFactoryResolver,\n    EmbeddedViewRef,\n    ApplicationRef,\n    ComponentRef\n} from '@angular/core';\n\nimport { LightboxComponent } from './lightbox.component';\nimport { LightboxMobileComponent } from './lightbox-mobile.component';\nimport { defaultConfig } from './config';\n\nexport interface AdComponent {\n  data: any;\n  close: any;\n}\n\n@Injectable()\nexport class CrystalLightbox {\n\n    get isMobile() {\n        var check = false;\n        (function(a){if(/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0,4))) check = true;})(navigator.userAgent||navigator.vendor);\n        return check;\n    };\n\n\tconstructor(\n\t\tprivate componentFactoryResolver: ComponentFactoryResolver,\n\t\tprivate appRef: ApplicationRef,\n\t\tprivate injector: Injector\n\t) { }\n \n\tappendComponentToBody(component: any, data: any) {\t\t\n\t\tconst componentRef = this.componentFactoryResolver\n\t\t\t.resolveComponentFactory(component)\n\t\t\t.create(this.injector);\n\n\t\t(<AdComponent>componentRef.instance).data = data;\n\t\tthis.appRef.attachView(componentRef.hostView);\n\t\tconst domElem = (componentRef.hostView as EmbeddedViewRef<any>).rootNodes[0] as HTMLElement;\n\t\tdocument.body.appendChild(domElem);\n\t\t\n        (<AdComponent>componentRef.instance).close.subscribe(() => {\n\t\t\tthis.appRef.detachView(componentRef.hostView);\n\t\t\tcomponentRef.destroy();\n        });\n\t}\n\n\topen(images: any, config: any = {}){\n\t\tconfig = this.applyConfigDefaults(defaultConfig, config);\n\t\tlet data = {\n\t\t\timages, \n\t\t\tconfig\n\t\t};\n        let component = this.getLightboxComponent();\n        \n\t\tthis.appendComponentToBody(component, data);\n\t}\n\n\tgetLightboxComponent(){\n\t\treturn !this.isMobile ? LightboxComponent : LightboxMobileComponent;\n\t}\n\n\tapplyConfigDefaults(defaultConfig, config){\n\t\tif (!config.index){ \n\t\t\tconfig.index = 0;\n\t\t}\n\t\treturn Object.assign(defaultConfig, config);\n\t}\n}","import { Component, Input, OnInit, ElementRef, ViewChild } from '@angular/core';\nimport { CrystalLightbox } from'./dom.service'\n\n@Component({\n\tselector: 'crystal-gallery', \n\ttemplate: `<div #contentWrapper [hidden]=\"isNgContent\">\n    <ng-content></ng-content>\n</div>\n\n<masonry-layout \n    class=\"cg-wrapper\"\n    *ngIf=\"!isNgContent\" \n\n    [max-height]=\"masonryMaxHeight\" \n    [gutter]=\"masonryGutter\"\n    [masonry]=\"masonryState\"\n    [class-name]=\"'cg-image'\"\n    [images]=\"images\"\n    (events)=\"handleMasonryLayoutEvents($event)\"></masonry-layout>`,\n    styles: [`:host{display:block;width:100%}:host .cg-wrapper{display:block;width:100%;overflow:hidden}:host .cg-wrapper.cg-show{height:auto;position:relative;display:table}:host .cg-image img{cursor:pointer;width:100%}`],\n})\nexport class GalleryComponent {\n\n    @Input('images') images: any;\n    @Input('config') config: any = {};\n\n    @ViewChild('contentWrapper') contentWrapper: ElementRef;\n\n    get isNgContent(){\n        return this.contentWrapper.nativeElement.children.length > 0;\n    }\n\n    get masonryState(){\n        return this.config.masonry;\n    }\n\n    get masonryMaxHeight(){\n    \treturn this.config.masonryMaxHeight;\n    }\n\n    get masonryGutter(){\n    \treturn this.config.masonryGutter;\n    }\n\n\tconstructor(\n\t\tprivate lightbox: CrystalLightbox,\n\t\tprivate elementRef: ElementRef\n\t) {}\n\n\tshowLightbox(images: any, i: number){\n        this.config.index = i;\n\t\tthis.lightbox.open(images, this.config);\n\t}\n\n    handleMasonryLayoutEvents(event){\n        this.showLightbox(this.images, event.index);\n    }\n}","import { Component, ElementRef, HostListener, Input, Output, OnInit, OnChanges, EventEmitter } from '@angular/core';\n\nexport interface Image {\n    path: string; \n    width: number; \n    height: number;\n    computedHeight?: string;\n    computedWidth?: string;\n    margin?: string;\n};\n\nexport interface Images extends Array<Image>{}\n\n@Component({\n    selector: 'masonry-layout', \n    template: `<div \n\t[ngClass]=\"CLASS_NAME\"\n\t*ngFor=\"let image of images; let i = index;\"\n    [style.width]=\"image.computedWidth\"\n    [style.height]=\"image.computedHeight\"\n    [style.float]=\"'left'\"\n    [style.margin]=\"image.margin\"\n    [style.background]=\"'#eeeeee'\"\n    [style.lineHeight]=\"0\">\n\t<img \n        #imageElem\n        [src]=\"image.preview || image.full\" \n        [style.width.%]=\"100\" \n        [style.height]=\"'auto'\"\n        [style.opacity]=\"0\"\n        (click)=\"clickOnImage(image, i)\"\n        (load)=\"onImageLoaded(imageElem)\" />\n</div>`,\n})\n\nexport class MasonryLayoutComponent {\n    GUTTER: number = 0;\n    nodes: any;\n    elem: any;\n    savedNodeDimensions: any = [];\n    observer: any;\n    gridState: string = 'not started';\n    resizeTimer: any;\n    changesTimer: any;\n\n    @Input('images') images: Images; \n    @Input('masonry') ENABLE_MASONRY: boolean = true; \n    @Input('max-height') MAX_HEIGHT: number = 400; \n    @Input('class-name') CLASS_NAME: string | { [key: string]: any; };\n\n    @Input('gutter')\n    set gutter(value: number){\n        this.GUTTER = value / 2;\n    }\n\n    @Output() events: EventEmitter<any> = new EventEmitter<any>();\n     \n    get isMobile():boolean {\n        var check = false;\n        (function(a){if(/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0,4))) check = true;})(navigator.userAgent||navigator.vendor);\n        return check;\n    };\n     \n    constructor(private elementRef: ElementRef){\n        this.elem = this.elementRef.nativeElement;\n    }\n\n    @HostListener('window:resize', ['$event'])\n    onWindowResize(event) {\n        clearTimeout(this.resizeTimer);\n\n        this.resizeTimer = setTimeout(() => {\n            this.gridState = 'not started';\n            this.buildGrid(); \n        }, 250);\n    }\n\n    ngOnInit() {\n        this.buildGrid();\n    }\n\n    ngOnChanges(){\n        clearTimeout(this.changesTimer);\n\n        this.changesTimer = setTimeout(() => {\n            this.gridState = 'not started';\n            this.buildGrid(); \n        }, 250);\n    }\n\n    buildGrid(){\n        let parentWidth = Math.floor(this.elem.parentNode.offsetWidth);\n        let totalRowWidth: any = 0; \n        let row: any = {\n            startIndex: 0,\n            endIndex: 0,\n            length: 0,\n            totalWidth: 0\n        };\n\n        if (!this.images || !this.images.length){\n            return;\n        }\n\n        this.elem.style.width = parentWidth +'px';\n        this.elem.style.display = 'table';\n\n        this.images.forEach((node, index) => {\n            if (row.totalWidth === 0){\n                row.startIndex = index;\n                row.length = 0;\n            }\n\n            row.length++;\n            row.totalWidth += this.getComputedWidth(index);\n            \n            if (row.totalWidth >= parentWidth || this.isLastChild(index)){\n                row.endIndex = index;\n                let scaling = row.totalWidth/parentWidth;\n\n                this.setColDimensions(scaling, row);\n                row.totalWidth = 0; \n            }\n        });\n    }\n\n    setColDimensions(scaling: number, row: any){\n        let totalRowWidth: any = 0;\n        let parentWidth = this.elem.parentNode.offsetWidth;\n        scaling = (scaling < 1) ? 1 : scaling;\n\n        this.images.forEach((node, index) => {\n            if (!this.ENABLE_MASONRY){\n                node.computedHeight = this.MAX_HEIGHT + 'px';\n                node.computedWidth = this.getComputedWidth(index) + 'px';\n                node.margin = this.getNodeMargin(parentWidth);\n                return;\n            }\n\n            if (index >= row.startIndex && index <= row.endIndex){\n                let nodeWidth;\n\n                // last image\n                if (index === row.endIndex && scaling > 1){ \n                    nodeWidth = (100 - totalRowWidth) - ((this.GUTTER * 2) / parentWidth * 100);\n                    node.computedWidth = 'calc('+nodeWidth+'%)';\n\n                    if (this.gridState === 'not started'){\n                        this.gridState = 'pre-building';\n\n                        setTimeout(() => {\n                            this.buildGrid();\n                        }, 100);\n                    }\n                } \n                else {\n                    nodeWidth = ((this.getComputedWidth(index) / scaling) / parentWidth * 100) - ((row.length * (this.GUTTER * 2)) * (this.getComputedWidth(index) / scaling) / parentWidth) / parentWidth * 100;\n                    node.computedWidth = 'calc('+nodeWidth+'%)';\n                    \n                    totalRowWidth += nodeWidth;\n                    totalRowWidth += (this.GUTTER / parentWidth * 100) * 2;  \n                }\n\n                // last row and last image\n                if (index === row.endIndex && row.length === 1 && this.isMobile){\n                \tnodeWidth = 100 - ((this.GUTTER * 2) / parentWidth * 100);\n                    let height = node.height * ( parentWidth * (nodeWidth / 100) / node.width);\n\n                    if (height/2 < this.MAX_HEIGHT){\n                        node.computedWidth = 'calc('+nodeWidth+'%)';\n                    }\n                }\n\n                node.margin = this.getNodeMargin(parentWidth);\n                node.computedHeight = node.height * ( parentWidth * (nodeWidth / 100) / node.width) + 'px';\n            }\n        });\n    }\n\n    getComputedWidth(index: number){\n        return this.images[index].width / (this.images[index].height / this.MAX_HEIGHT);\n    }\n\n    isLastChild(index: number){\n        return index + 1 === this.images.length;\n    }\n\n    getNodeMargin(parentWidth: number){\n        return 'calc('+this.GUTTER / parentWidth * 100+'%)';\n    }\n\n    clickOnImage(image: any, i: number){\n        this.events.emit({\n            type: 'click-on-image',\n            image: image,\n            index: i\n        });\n    }\n\n    onImageLoaded(elem){\n        elem.style.opacity = 1;\n    }\n}","import { Directive, ElementRef, HostListener, Input, Output, EventEmitter } from '@angular/core';\n\n@Directive({\n    selector: '[pinch]'\n})\n\nexport class PinchDirective{\n\n    elem: any;\n    eventType: any;\n\n    scale: any = 1;\n    initialScale: any = 1;\n\n    startX: any;\n    startY: any;\n\n    moveX: any = 0;\n    moveY: any = 0;\n    initialMoveX: any = 0;\n    initialMoveY: any = 0;\n\n    moveXC: any;\n    moveYC: any;\n\n    distance: any;\n    initialDistance: any;\n\n    isNextImageLoaded: any = true;\n\n    @Input() isLast: any;\n    @Input() isFirst: any;\n\n    @Output() events = new EventEmitter<boolean>();\n     \n    constructor(private elementRef: ElementRef){\n        this.elem = this.elementRef.nativeElement;\n    }\n\n    @HostListener('touchstart', ['$event'])\n    touchstartHandler(event) {\n        this.elem.style.transformOrigin = '0 0';\n    }\n\n    @HostListener('touchmove', ['$event'])\n    touchmoveHandler(event) {\n        let touches = event.touches;\n\n        if (touches.length === 1 && this.scale === 1 && !this.eventType || this.eventType == 'swipe'){\n            event.preventDefault();\n\n            if (!this.isNextImageLoaded) {\n                return;\n            }\n\n            if (!this.eventType){\n                this.startX = event.touches[0].pageX;\n                this.startY = event.touches[0].pageY;\n            }\n\n            this.eventType = 'swipe';\n\n            this.moveX = this.initialMoveX + (event.touches[0].pageX - this.startX);\n            this.moveY = 0;\n\n            this.transformElem(0);\n        }\n    }\n\n    @HostListener('touchend', ['$event'])\n    touchendHandler(event) {\n        let touches = event.touches;\n        let img = this.elem.getElementsByTagName(\"img\")[0];\n\n        if (!this.isNextImageLoaded) {\n            return;\n        }\n        \n        if (this.scale < 1){\n            this.scale = 1;\n        }\n        if (this.moveY > 0){\n            this.moveY = 0;\n        } \n\n        if (this.moveX > 100){\n            this.slide('prev');\n        } else if (this.moveX < -100){\n            this.slide('next');\n        } else {\n            this.moveX = 0;\n        }\n\n        this.initialScale = this.scale;\n        this.initialMoveX = this.moveX;\n        this.initialMoveY = this.moveY;\n\n        this.transformElem(200); \n\n        this.eventType = 'touchend';        \n        if (touches.length == 0){\n            this.eventType = '';\n        }\n    }\n\n    slide(event: any){\n        this.onSlide(event);\n\n        if (event === 'prev'){\n            this.moveX = window.innerWidth + 8; \n            if (this.isFirst){\n                this.moveX = 0;\n            }\n        }\n        if (event === 'next'){\n            this.moveX = -window.innerWidth - 8;\n            if (this.isLast){\n                this.moveX = 0;\n            }\n        }\n\n        this.isNextImageLoaded = false;\n\n        setTimeout(() => {\n            this.moveX = 0;\n            this.initialMoveX = 0;\n            this.isNextImageLoaded = true;\n        }, 200);\n    }\n\n    onSlide(evenType:any) {\n        this.events.emit(evenType);\n    }\n\n    transformElem(duration: any = 50){\n        let matrixVal = 'matrix('+ Number(this.scale) +','+ 0 +','+ 0 +','+ Number(this.scale) +','+ Number(this.moveX) +','+ Number(this.moveY) +')';\n        \n        this.elem.style.transition = 'all '+ duration +'ms';\n        this.elem.style.transform = matrixVal;\n        this.elem.style.webkitTransform = matrixVal;\n    }\n}","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { LightboxComponent } from './lightbox.component';\nimport { LightboxMobileComponent } from './lightbox-mobile.component';\nimport { GalleryComponent } from './gallery.component';\nimport { CrystalLightbox } from'./dom.service' \nimport { MasonryLayoutComponent } from './masonry-layout.component'; \nimport { PinchDirective } from './pinch.directive'; \n\n@NgModule({\n    declarations: [\n        LightboxComponent,\n        LightboxMobileComponent,\n        GalleryComponent,\n        MasonryLayoutComponent,\n        PinchDirective\n    ],\n    imports: [\n        CommonModule\n    ],\n    exports: [\n        GalleryComponent\n    ],\n    providers: [\n        CrystalLightbox\n    ],\n    bootstrap: [\n        \n    ],\n    entryComponents: [\n        LightboxComponent,\n        LightboxMobileComponent\n    ]\n})\nexport class CrystalGalleryModule { }\n"],"names":["defaultConfig"],"mappings":"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"}
