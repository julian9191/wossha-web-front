{"version":3,"sources":["ng://ngx-crystal-gallery/lib/lightbox.component.ts","ng://ngx-crystal-gallery/lib/lightbox-mobile.component.ts","ng://ngx-crystal-gallery/lib/config.ts","ng://ngx-crystal-gallery/lib/dom.service.ts","ng://ngx-crystal-gallery/lib/gallery.component.ts","ng://ngx-crystal-gallery/lib/masonry-layout.component.ts","ng://ngx-crystal-gallery/lib/pinch.directive.ts","ng://ngx-crystal-gallery/lib/gallery.module.ts"],"names":["LightboxComponent","elementRef","ref","this","EventEmitter","Object","defineProperty","prototype","data","images","config","currentImageIndex","image","index","path","full","prevIndex","value","length","description","onKeyDown","event","key","prev","next","closeLightbox","onMouseEnter","hideControls","ngOnInit","_this","setBackgroundOpacity","backgroundOpacity","setTimeout","showLightbox","setMaxDimensions","setAnimationDuration","close","emit","animationDuration","isLast","loop","currImageLoaded","isFirst","latestImageIndex","onImageLoaded","detectChanges","opacity","hostStyleBackgroundColor","wrapperElem","nativeElement","style","height","descriptionHeight","currImageElem","maxHeight","lightboxMaxHeight","maxWidth","lightboxMaxWidth","hostStyleTransition","Component","args","selector","template","styles","ElementRef","ChangeDetectorRef","Input","HostBinding","ViewChild","HostListener","LightboxMobileComponent","show","loaded","currImage","nextIndex","window","innerWidth","innerHeight","onWindowResize","landscapeMode","isLandscape","lightboxShown","slide","afterSlide","eventType","prevImage","nextImage","defaultWrapperPosition","elem","handlePinchEvents","$event","wrapperEl","transition","transform","webkitTransform","defaultConfig","masonry","masonryMaxHeight","masonryGutter","counter","CrystalLightbox","componentFactoryResolver","appRef","injector","a","check","navigator","userAgent","vendor","test","substr","appendComponentToBody","component","componentRef","resolveComponentFactory","create","attachView","hostView","domElem","rootNodes","document","body","appendChild","subscribe","detachView","destroy","open","applyConfigDefaults","getLightboxComponent","isMobile","assign","Injectable","ComponentFactoryResolver","ApplicationRef","Injector","GalleryComponent","lightbox","contentWrapper","children","i","handleMasonryLayoutEvents","MasonryLayoutComponent","GUTTER","clearTimeout","resizeTimer","gridState","buildGrid","ngOnChanges","changesTimer","parentWidth","Math","floor","parentNode","offsetWidth","row","startIndex","endIndex","totalWidth","width","display","forEach","node","getComputedWidth","isLastChild","scaling","setColDimensions","totalRowWidth","ENABLE_MASONRY","computedHeight","MAX_HEIGHT","computedWidth","margin","getNodeMargin","nodeWidth","clickOnImage","events","type","Output","PinchDirective","touchstartHandler","transformOrigin","touchmoveHandler","touches","scale","preventDefault","isNextImageLoaded","startX","pageX","startY","pageY","moveX","initialMoveX","moveY","transformElem","touchendHandler","getElementsByTagName","initialScale","initialMoveY","onSlide","evenType","duration","matrixVal","Number","Directive","CrystalGalleryModule","NgModule","declarations","imports","CommonModule","exports","providers","bootstrap","entryComponents"],"mappings":"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","sourcesContent":["import { \n    Component, \n    Input, \n    EventEmitter, \n    OnInit, \n    HostBinding, \n    HostListener, \n    ViewChild, \n    ElementRef, \n    ChangeDetectorRef } from '@angular/core';\n\n@Component({\n    selector: 'crystal-lightbox',\n    template: `<div class=\"cg-counter\" *ngIf=\"config.counter && images.length > 1\">{{counter}}</div>\n<div class=\"cg-description\" *ngIf=\"description\">{{description}}</div>\n\n<div \n\tclass=\"cg-close\" \n\t(click)=\"closeLightbox()\">Close</div>\n\n<div \n\tclass=\"cg-spinner\" \n\t *ngIf=\"!currImageLoaded\"></div>\n\n<div class=\"cg-wrapper\" #wrapper>\n\t<img \n\t\tclass=\"cg-curr-image\" \n\t\t#currImageElem \n\t\t[src]=\"currImagePath?.full\" \n\t\t[class.cg-show]=\"currImageLoaded\" \n\t\t(load)=\"onImageLoaded()\" />\n</div>\n\n<div \n\tclass=\"cg-prev\" \n\t[hidden]=\"isFirst && !config.loop\" \n\t(click)=\"prev()\"></div>\n<div \n\tclass=\"cg-next\" \n\t[hidden]=\"isLast && !config.loop\" \n\t(click)=\"next()\"></div>`,\n    styles: [`._cg-spinner,._cg-spinner:after{border-radius:50%;width:36px;height:36px}._cg-spinner{margin:0 auto;font-size:10px;position:relative;text-indent:-9999em;border-top:4px solid rgba(255,255,255,.2);border-right:4px solid rgba(255,255,255,.2);border-bottom:4px solid rgba(255,255,255,.2);border-left:4px solid #fff;-webkit-transform:translateZ(0);transform:translateZ(0);-webkit-animation:.9s linear infinite load8;animation:.9s linear infinite load8}@-webkit-keyframes load8{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes load8{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.cg-spinner,.cg-spinner:after,.cg-spinner:before{border-radius:50%;width:10px;height:10px;-webkit-animation:1.5s ease-in-out infinite load7;animation:1.5s ease-in-out infinite load7}.cg-spinner{color:#fff;font-size:10px;margin:0 auto 20px;position:relative;text-indent:-9999em;-webkit-transform:translateZ(0);transform:translateZ(0);-webkit-animation-delay:-.16s;animation-delay:-.16s}.cg-spinner:after,.cg-spinner:before{content:\"\";position:absolute;top:0}.cg-spinner:before{left:-3em;-webkit-animation-delay:-.32s;animation-delay:-.32s}.cg-spinner:after{left:3em}@-webkit-keyframes load7{0%,100%,80%{box-shadow:0 2.5em 0 -1.3em}40%{box-shadow:0 2.5em 0 0}}@keyframes load7{0%,100%,80%{box-shadow:0 10px 0 -1.3em}40%{box-shadow:0 10px 0 0}}:host(.cg-show){opacity:1}:host(.cg-hide-controls) .cg-close,:host(.cg-hide-controls) .cg-next,:host(.cg-hide-controls) .cg-prev{opacity:0}:host{opacity:0;position:fixed;top:0;left:0;width:100%;height:100%;color:#fff;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:opacity .1s cubic-bezier(.645,.045,.355,1);z-index:10000;background-color:rgba(0,0,0,.85)}:host img{opacity:1;max-width:100%;max-height:100%;box-shadow:0 4px 15px 2px rgba(0,0,0,.35)}:host img.cg-curr-image.cg-show{opacity:1}:host img.cg-curr-image{opacity:0;z-index:10}:host .cg-wrapper.cg-hide{display:none}:host .cg-wrapper{display:flex;align-items:center;justify-content:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;top:0;left:0;width:100%;height:100%}:host .cg-spinner{position:absolute;top:50%;left:50%;margin-top:-15px;margin-left:-5px}:host .cg-counter{text-align:left;position:absolute;left:22px;top:13px;font-size:14px;text-shadow:0 0 1px rgba(0,0,0,.65);z-index:30}:host .cg-description{text-align:center;max-width:calc(100% - 200px);margin:0 auto;font-size:14px;line-height:43px;position:relative;z-index:50}:host .cg-close{position:absolute;top:0;right:0;padding:13px 22px;font-size:13px;text-transform:uppercase;cursor:pointer;opacity:.5;z-index:30;transition:opacity .1s ease-in-out;text-shadow:0 0 1px rgba(0,0,0,.65)}:host .cg-close:hover{opacity:1}:host .cg-next,:host .cg-prev{width:40%;height:100%;position:absolute;top:0;cursor:pointer;opacity:.5;z-index:20;transition:opacity .1s ease-in-out;-webkit-tap-highlight-color:rgba(255,255,255,0)}:host .cg-next:hover,:host .cg-prev:hover{opacity:1}:host .cg-prev{left:0;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAiCAYAAABbXymAAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjMzMTZCQzFERDgzMTExRTc5QUYxQTUxRDI5MkM5ODZCIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjMzMTZCQzFFRDgzMTExRTc5QUYxQTUxRDI5MkM5ODZCIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MzMxNkJDMUJEODMxMTFFNzlBRjFBNTFEMjkyQzk4NkIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MzMxNkJDMUNEODMxMTFFNzlBRjFBNTFEMjkyQzk4NkIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7VrwZKAAAClElEQVR42qzWSY8SQRgGYLoVHPeTXlwCiIwMArJGtiABNep4IGZi4oEfMJooLjePrnFGf5yJS0hYmq2b/aBxiQ6+lRRJdaUZq5vp5E2TLnioVFd9VZLN+iUxIdeMiW2fRVCmvz2DpJBVCk6X6SVBHQRLpVKb7Xb782g0Usrl8jM8W0P20+9YQn3JZPIhwN6MXoPBoI3nG8iKGZhF14A+AqrOmKtWq31F213kkOgQ69B0Ol0BqrFot9vV/H7/c7RfEoVZ1G+EdjqdvtfrfYn2K8gJkaHQodlstjIej/ssihdH0Ddov4acQo7QlycJo5PJhEc1j8fzmqJk2h1D7Lv1lkUv5nK5xzzaarWMUIcwms/nCTrgUbfbTdCrVtAAQafTqQ5VFEVdCi0UCk/Q0yGLNptN1el0vqLoaRHUxqPoKY/2KFo0g0r0ba4Wi8WnQEcs2mg0VAPULrJsZTqpNzDZ6yxar9dVl8tFVtR10SnFohJdgnZYuh9IkjSTZfknPn5DviO/kL/IjkgtIOhhJJ7JZF5gdU24hdDG6qqg/QJywEzlmg/FSTLhE4nE9nA4nHJFRvH5fJto94gOBfvyjtJxXI/H4x+A63re6/UUVDCCnzeDz6fbceQscjsWi703wFsM7hDBJQN8PRqNbmNn0OGapu0JfoviYx4PBAL30e5dCg+Hw0Z4e8/wfr/P451QKPRgaRzIFjDdksefsbjdKn5zER6JRMiwuP+3Ne2KB4PBLVVVR1xd+YK2O2bOFYvwd8CHbK/x/J6Zc8Ui/AZmxdtqtdrAwlFLpRLZrS/PYcnkEUuiY7hCS+g5sovT55+Qj7QS/jYD8zjp/UF6t9GS+oPed8zCLC5zJ0tSo//Q+8wKLHTw/ifAAMQVS4vHZR2VAAAAAElFTkSuQmCC) center left 22px no-repeat}:host .cg-next{right:0;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAiCAYAAABbXymAAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjEyNDE3MDE1RDgzMTExRTc5NjM4QTIzQzI2Rjc2Qjg2IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjEyNDE3MDE2RDgzMTExRTc5NjM4QTIzQzI2Rjc2Qjg2Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MTI0MTcwMTNEODMxMTFFNzk2MzhBMjNDMjZGNzZCODYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MTI0MTcwMTREODMxMTFFNzk2MzhBMjNDMjZGNzZCODYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7zv5BKAAACl0lEQVR42rTW224SQRwGcHZb8FT1Sm88BJCiFAE5JpyCBNRE8coYEy94AGqi9XDXS0+JVh/CB/EhiFET5LjAclgWjaa1aazfJDM6u6LuLjrJl2124cd0duY/I9h+NoELabtcTLcFCon0bw+SRE4h28hn2xyNoIvISrlcfqAoSluSpLepVKqCe6cRB/2MYAXei1wfjUbSLm34gX4ymbyN+z6rOBmC/ciNer3+fpdrwGXgd8h/YwVn8Dm/37/e6/UGOnyQTqfXrOBsKI4g571e76Nutzv8De43gwv05S0hx5CLwJ/iBWrwyWQyzGazpnHyITtyCDlBcI/H8wS4ZlhUVbWMO/R4p9P5Bc/lcnfx/Ow8+AW32z0LH+Xz+X+Dt9ttmcen0ynDA1bx4wR3Op2PW62WrOv5uFAo3JsXL1K8r+v5LNxmZrb8wJvNpn5YlGKxeJ/WFruZBcRPxUsul2u90WhocCyqBqk3dLGJiwbgb/T6FflCSqkoiluCIGjqNGzWgQUz9YR8aQ9yBqtyDQtH0q1KNZPJPMTzOHKA4oaHwuPz+SooUm0eHY/H00QisUEWFHKUDYVRdBmVr9Lv9/WoGo/HX+J5iY7/QSMvj003hnb0aCwWe4HnV5GTyGEj002DDgYDDYqdRo1Goxu0p3pU+BvqDQQCqzPQCUWvzINKejQcDltHQ6HQLaBdHh0Oh5ZRO0OBaFD8iIL7z82ibGtyRyKR1T+gl82g/GZ6Dev/HY/KsqwEg0FLKL/93+R7C3QM9Nk8KDtiOWq12jb2s2XS01Kp9Kparb7G/TfIR2QT2TF6UBS42bBEi/UK/SIBPyCfkC0zKA+z6rWPXm30tLlJr6ZQ/ZmYDYnI1eEdejV9Thb+18H7uwADAOG/Wcm4x+knAAAAAElFTkSuQmCC) center right 22px no-repeat}`]\n})\nexport class LightboxComponent {\n    _index: any;\n    prevIndex: any;\n    currImageLoaded: any; \n    prevImageHide: any;\n    wrapperProp: any;\n    _data: any;\n    currentImageIndex: number = 0;\n    spinnerHeight: number = 30;\n    descriptionHeight: number = 43;\n\n    @Input() data: any;\n\n    close = new EventEmitter();\n\n    @HostBinding('class.cg-show') showLightbox: boolean = false;\n    @HostBinding('class.cg-hide-controls') hideControls: boolean = false;\n    @HostBinding('style.transition') hostStyleTransition: string;\n    @HostBinding('style.backgroundColor') hostStyleBackgroundColor: string;\n\n    @ViewChild('currImageElem') currImageElem: ElementRef;\n    @ViewChild('prevImageElem') prevImageElem: ElementRef;\n    @ViewChild('wrapper') wrapperElem: ElementRef;\n\n    get images(){\n        return this.data.images;\n    }\n\n    get config(){\n        return this.data.config;\n    }\n\n    get index(){\n        return this.currentImageIndex;\n    }\n\n    get currImagePath(){\n        let image = this.images[this.index];\n\n        if (!image){\n            return false;\n        }\n\n        if (image.path){\n            image.full = image.path;\n        }\n\n        return image;\n    }\n\n    get prevImagePath(){\n        return this.images[this.prevIndex];\n    }\n\n    set prevImagePath(value: any){\n        this.images[this.prevIndex] = value;\n    }\n\n    get isFirst(){\n        return this.index === 0;\n    }\n\n    get isLast(){\n        return this.index === (this.images.length-1);\n    }\n\n    get latestImageIndex(){\n        return this.images.length - 1;\n    }\n\n    get description(){\n        return this.images[this.index].description;\n    }\n\n    get counter(){\n        return this.currentImageIndex + 1 +'/'+ this.images.length;\n    }\n\n    @HostListener('window:keydown', ['$event'])\n    onKeyDown(event: any) {\n        switch(event.key) {\n            case 'ArrowLeft':\n                this.prev();\n                break;\n            case 'ArrowRight':\n                this.next();\n                break;\n            case 'Escape':\n                this.closeLightbox();\n                break;\n        }\n    }\n\n    @HostListener(\"mouseenter\", ['$event'])\n    onMouseEnter(event: any) {\n        this.hideControls = false;\n    }\n\n    constructor(private elementRef: ElementRef, private ref: ChangeDetectorRef){\n    }\n\n    ngOnInit(){\n        this.setBackgroundOpacity(this.config.backgroundOpacity);\n        this.currentImageIndex = this.config.index;\n        //document.body.style.overflow = 'hidden';\n\n        setTimeout(() => {\n            this.showLightbox = true;\n        }, 30);\n\n        this.setMaxDimensions();\n        this.setAnimationDuration();\n    }\n\n    closeLightbox(){\n        this.showLightbox = false;\n        setTimeout(() => {\n           this.close.emit('close');\n           //document.body.style.overflow = '';\n        }, this.config.animationDuration); \n    }\n\n    next(){\n        if (this.isLast){\n            if (this.config.loop){\n                this.currentImageIndex = 0;\n            } else {\n                return;\n            }\n        } else {\n            this.currentImageIndex++;\n        }\n        this.currImageLoaded = 'loading';\n\n        setTimeout(() => {\n            if (this.currImageLoaded === 'loading'){\n                this.currImageLoaded = false;\n            }\n        }, 50);\n\n        this.setMaxDimensions();\n    }\n    prev(){\n        if (this.isFirst){\n            if (this.config.loop){\n                this.currentImageIndex = this.latestImageIndex;\n            } else {\n                return;\n            }\n        } else {\n            this.currentImageIndex--;\n        }\n\n        setTimeout(() => {\n            if (this.currImageLoaded === 'loading'){\n                this.currImageLoaded = false;\n            }\n        }, 50);\n\n        this.setMaxDimensions();\n    }\n\n    onImageLoaded(){\n        this.currImageLoaded = true;\n        this.ref.detectChanges();\n    }\n\n    setBackgroundOpacity(opacity: any){\n        this.hostStyleBackgroundColor = 'rgba(0, 0, 0, '+opacity+')';\n    }\n\n    setMaxDimensions(){\n        if (this.description){\n            this.wrapperElem.nativeElement.style.height = 'calc(100% - ' + (this.descriptionHeight * 2) + 'px)';\n        } else {\n            this.wrapperElem.nativeElement.style.height = '';\n        }\n\n        this.currImageElem.nativeElement.style.maxHeight = 'calc(' + this.config.lightboxMaxHeight + ')';\n        this.currImageElem.nativeElement.style.maxWidth = this.config.lightboxMaxWidth;\n    }\n\n    setAnimationDuration(){\n        this.hostStyleTransition = 'opacity '+this.config.animationDuration+'ms';\n    }\n}","import { Component, Input, EventEmitter, OnInit, HostBinding, HostListener, ViewChild, ElementRef, ChangeDetectorRef } from '@angular/core';\n\n@Component({\n\tselector: 'crystal-lightbox-mobile',\n\ttemplate: `<div class=\"cg-back\" (click)=\"closeLightbox()\"></div>\n\n<div \n\tclass=\"cg-wrapper\" \n\t[class.cg-landscape]=\"landscapeMode\"\n\tpinch [isLast]=\"isLast\" [isFirst]=\"isFirst\" (events)=\"handlePinchEvents($event)\"\n\t#wrapper>\n\t<div class=\"cg-image-wrap cg-prev-image\">\n\t\t<img \n\t\t\t*ngIf=\"prevImagePath\"\n\t\t\t[src]=\"prevImagePath.full\" \n\t\t\t[class.cg-hide]=\"!prevImage.loaded\"\n\t\t\t(load)=\"onImageLoaded('prevImage')\"\n\t\t/>\n\t\t<div class=\"cg-spinner\" *ngIf=\"!prevImage.loaded && prevImagePath\"></div>\n\t</div>\n\n\t<div class=\"cg-image-wrap cg-curr-image\" *ngIf=\"currImage.show\">\n\t\t<img \n\t\t\t[src]=\"currImagePath?.full\" \n\t\t\t[class.cg-hide]=\"!currImage.loaded\" \n\t\t\t(load)=\"onImageLoaded('currImage')\"\n\t\t/>\n\t\t<div class=\"cg-spinner\" *ngIf=\"!currImage.loaded\"></div>\n\t</div>\n\t\n\t<div class=\"cg-image-wrap cg-next-image\">\n\t\t<img \n\t\t\t*ngIf=\"nextImagePath\"\n\t\t\t[src]=\"nextImagePath.full\" \n\t\t\t[class.cg-hide]=\"!nextImage.loaded\" \n\t\t\t(load)=\"onImageLoaded('nextImage')\"\n\t\t/>\n\t\t<div class=\"cg-spinner\" *ngIf=\"!nextImage.loaded && nextImagePath\"></div>\n\t</div>\n</div>`,\n    styles: [`._cg-spinner,._cg-spinner:after{border-radius:50%;width:36px;height:36px}._cg-spinner{margin:0 auto;font-size:10px;position:relative;text-indent:-9999em;border-top:4px solid rgba(255,255,255,.2);border-right:4px solid rgba(255,255,255,.2);border-bottom:4px solid rgba(255,255,255,.2);border-left:4px solid #fff;-webkit-transform:translateZ(0);transform:translateZ(0);-webkit-animation:.9s linear infinite load8;animation:.9s linear infinite load8}@-webkit-keyframes load8{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes load8{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.cg-spinner,.cg-spinner:after,.cg-spinner:before{border-radius:50%;width:10px;height:10px;-webkit-animation:1.5s ease-in-out infinite load7;animation:1.5s ease-in-out infinite load7}.cg-spinner{color:#fff;font-size:10px;margin:0 auto 20px;position:relative;text-indent:-9999em;-webkit-transform:translateZ(0);transform:translateZ(0);-webkit-animation-delay:-.16s;animation-delay:-.16s}.cg-spinner:after,.cg-spinner:before{content:\"\";position:absolute;top:0}.cg-spinner:before{left:-3em;-webkit-animation-delay:-.32s;animation-delay:-.32s}.cg-spinner:after{left:3em}@-webkit-keyframes load7{0%,100%,80%{box-shadow:0 2.5em 0 -1.3em}40%{box-shadow:0 2.5em 0 0}}@keyframes load7{0%,100%,80%{box-shadow:0 10px 0 -1.3em}40%{box-shadow:0 10px 0 0}}:host(.cg-show){opacity:1}:host(.cg-hide-controls) .cg-close,:host(.cg-hide-controls) .cg-next,:host(.cg-hide-controls) .cg-prev{opacity:0}:host{opacity:0;position:fixed;top:0;left:0;width:100%;height:100%;color:#fff;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:opacity .2s cubic-bezier(.645,.045,.355,1);z-index:10000;background-color:#000}:host .cg-back{background:url(\"data:image/svg+xml,%3C%3Fxml version%3D%221.0%22 encoding%3D%22UTF-8%22%3F%3E%3Csvg width%3D%2210px%22 height%3D%2216px%22 viewBox%3D%220 0 10 16%22 version%3D%221.1%22 xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22 xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E    %3C!-- Generator%3A sketchtool 40.2 (33826) - http%3A%2F%2Fwww.bohemiancoding.com%2Fsketch --%3E    %3Ctitle%3E11A73872-5EBF-46F6-B7C5-142D47A33339%3C%2Ftitle%3E    %3Cdesc%3ECreated with sketchtool.%3C%2Fdesc%3E    %3Cdefs%3E%3C%2Fdefs%3E    %3Cg id%3D%22Interface-1280-x-800%22 stroke%3D%22none%22 stroke-width%3D%221%22 fill%3D%22none%22 fill-rule%3D%22evenodd%22%3E        %3Cg id%3D%22Lot_viewpage_open%22 transform%3D%22translate(-111.000000%2C -296.000000)%22 fill%3D%22%23FFFFFF%22%3E            %3Cg id%3D%22arrows-16px-1_minimal-left%22 transform%3D%22translate(111.000000%2C 296.000000)%22%3E                %3Cpolygon id%3D%22Shape%22 points%3D%228.1 15.7 0.4 8 8.1 0.3 9.6 1.7 3.3 8 9.6 14.3%22%3E%3C%2Fpolygon%3E            %3C%2Fg%3E        %3C%2Fg%3E    %3C%2Fg%3E%3C%2Fsvg%3E\") center/12px no-repeat;width:40px;height:40px;opacity:.9;position:fixed;top:0;left:0;z-index:1000}:host .cg-wrapper.cg-landscape .cg-image-wrap img{height:100%}:host .cg-wrapper{transition:none;width:100%;height:100%;display:block}:host .cg-wrapper .cg-image-wrap.cg-prev-image{-webkit-transform:translate3d(calc(-100% - 8px),0,0);transform:translate3d(calc(-100% - 8px),0,0)}:host .cg-wrapper .cg-image-wrap.cg-next-image{-webkit-transform:translate3d(calc(100% + 8px),0,0);transform:translate3d(calc(100% + 8px),0,0)}:host .cg-wrapper .cg-image-wrap{width:100%;height:100%;text-align:center;position:absolute;display:flex;align-items:center;justify-content:center}:host .cg-wrapper .cg-image-wrap img{max-width:100%;max-height:100%;width:auto;height:auto;position:relative}:host .cg-wrapper .cg-image-wrap img.cg-hide{display:none}`]\n})\nexport class LightboxMobileComponent { \n\t_index: any;\n    prevIndex: any;\n    nextIndex: any;\n\n    currImage = {\n        show: false,\n        loaded: false,\n        index: 0\n    }; \n\n    prevImage = {\n        loaded: false\n    }; \n\n    nextImage = {\n        loaded: false\n    }; \n\n    wrapperProp: any;\n    landscapeMode: any;\n\n\tclose = new EventEmitter();\n\n    @Input() data: any;\n\n    @ViewChild('wrapper') wrapperEl: ElementRef;\n\n    get images(){\n        return this.data.images;\n    }\n\n    get config(){\n        return this.data.config;\n    }\n\n    get index(){\n        return this.currImage.index;\n    }\n\n    get currImagePath(){\n        let image = this.images[this.index];\n\n        if (!image){\n            return false;\n        }\n\n        if (image.path){\n            image.full = image.path;\n        }\n        \n        return image;\n    }\n\n    get prevImagePath(){\n        if (this.prevIndex < 0 && this.config.loop){\n            this.prevIndex = this.latestImageIndex;\n        }\n\n        let image = this.images[this.prevIndex];\n\n        if (image && image.path){\n            image.full = image.path;\n        }\n        return image;\n    }\n\n    get nextImagePath(){\n        let image = this.images[this.nextIndex];\n\n        if (image && image.path){\n            image.full = image.path;\n        }\n        return image;\n    }\n\n    get isFirst(){\n        if (this.config.loop){\n            return false;\n        } else {\n    \t    return this.index === 0;\n        }\n    }\n\n    get isLast(){\n        if (this.config.loop){\n            return false;\n        } else {\n            return this.index === this.latestImageIndex;\n        }        \n    }\n\n    get latestImageIndex(){\n        return this.images.length - 1;\n    }\n\n    get isLandscape(){\n        return window.innerWidth > window.innerHeight;\n    }\n\n    @HostBinding('class.cg-show') lightboxShown: boolean = false;\n\n    @HostListener('window:resize', ['$event'])\n    onWindowResize(event: any) {\n        this.landscapeMode = this.isLandscape;\n        this.ref.detectChanges();\n    }\n\n    constructor(private elementRef: ElementRef, private ref: ChangeDetectorRef){\n    }\n\n    ngOnInit(){\n        this.currImage.index = this.config.index;\n        this.prevIndex = this.currImage.index-1;\n        this.nextIndex = this.currImage.index+1;\n\n        this.showLightbox();\n    }\n\n    showLightbox(){\n        this.currImage.show = true;\n        setTimeout(() => {\n           this.lightboxShown = true;\n        }, 30);\n    }\n\n\tcloseLightbox(){\n\t\tthis.lightboxShown = false;\n        setTimeout(() => {\n           this.close.emit(true);\n        }, 200); \n\t}\n\n    slide(event: any){\n        if (event === 'next'){\n            \n            if (this.isLast){\n                return;\n            } else {\n                setTimeout(() => {\n                    this.currImage.index++;\n                }, 200); \n            }\n\n            if (this.index === this.latestImageIndex){\n                setTimeout(() => {\n                    this.currImage.index = 0;\n                }, 200); \n            }\n\n            setTimeout(() => {\n                this.afterSlide('next');\n            }, 300); \n        }\n\n        if (event === 'prev'){\n\n            if (this.isFirst){\n                return;\n            } else {\n                setTimeout(() => {\n                    this.currImage.index--;\n                }, 200); \n            }\n\n            if (this.index === 0){\n                setTimeout(() => {\n                    this.currImage.index = this.latestImageIndex;\n                }, 200); \n            }\n\n            setTimeout(() => {\n                this.afterSlide('prev');\n            }, 300); \n        }\n    }\n\n    afterSlide(eventType: any){\n        this.currImage.show = true;\n        \n        if (this.index === this.latestImageIndex && this.config.loop){\n            this.nextIndex = 0;\n        } else {\n            this.nextIndex = this.index+1;\n        }\n\n        if (this.index === 0 && this.config.loop){\n            this.prevIndex = this.latestImageIndex;\n        } else {\n            this.prevIndex = this.index-1;\n        }\n\n        if (eventType === 'prev'){\n\n            if (!this.prevImage.loaded){\n                this.currImage.loaded = false;\n                this.prevImage.loaded = false;\n            }\n            if (!this.currImage.loaded){\n                this.nextImage.loaded = false;\n            }\n        }\n\n        if (eventType === 'next'){\n\n            if (!this.nextImage.loaded){\n                this.currImage.loaded = false;\n                this.nextImage.loaded = false;\n            }\n            if (!this.currImage.loaded){\n                this.prevImage.loaded = false;\n            }\n        }\n\n        this.defaultWrapperPosition();\n        this.ref.detectChanges();\n    }\n\n    onImageLoaded(elem: any){\n        this[elem].loaded = true;\n        this.ref.detectChanges();\n    }\n\n    handlePinchEvents($event){\n        if ($event === 'prev'){\n            this.slide('prev');\n        }\n        if ($event === 'next'){\n            this.slide('next');\n        }\n    }\n\n    defaultWrapperPosition(){\n        let elem = this.wrapperEl.nativeElement;\n        elem.style.transition = 'all 0ms';\n        elem.style.transform = 'matrix(1, 0, 0, 1, 0, 0)';\n        elem.style.webkitTransform = 'matrix(1, 0, 0, 1, 0, 0)';\n    }\n}","export const defaultConfig = {\n\tmasonry: true,\n\tmasonryMaxHeight: 200,\n\tmasonryGutter: 4,\n\tloop: false,\n\tindex: 0,\n\tbackgroundOpacity: 0.85,\n\tcounter: false,\n\tlightboxMaxHeight: \"100%\",\n\tlightboxMaxWidth: \"100%\",\n\tanimationDuration: 100\n}","import {\n    Injectable,\n    Injector,\n    ComponentFactoryResolver,\n    EmbeddedViewRef,\n    ApplicationRef,\n    ComponentRef\n} from '@angular/core';\n\nimport { LightboxComponent } from './lightbox.component';\nimport { LightboxMobileComponent } from './lightbox-mobile.component';\nimport { defaultConfig } from './config';\n\nexport interface AdComponent {\n  data: any;\n  close: any;\n}\n\n@Injectable()\nexport class CrystalLightbox {\n\n    get isMobile() {\n        var check = false;\n        (function(a){if(/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0,4))) check = true;})(navigator.userAgent||navigator.vendor);\n        return check;\n    };\n\n\tconstructor(\n\t\tprivate componentFactoryResolver: ComponentFactoryResolver,\n\t\tprivate appRef: ApplicationRef,\n\t\tprivate injector: Injector\n\t) { }\n \n\tappendComponentToBody(component: any, data: any) {\t\t\n\t\tconst componentRef = this.componentFactoryResolver\n\t\t\t.resolveComponentFactory(component)\n\t\t\t.create(this.injector);\n\n\t\t(<AdComponent>componentRef.instance).data = data;\n\t\tthis.appRef.attachView(componentRef.hostView);\n\t\tconst domElem = (componentRef.hostView as EmbeddedViewRef<any>).rootNodes[0] as HTMLElement;\n\t\tdocument.body.appendChild(domElem);\n\t\t\n        (<AdComponent>componentRef.instance).close.subscribe(() => {\n\t\t\tthis.appRef.detachView(componentRef.hostView);\n\t\t\tcomponentRef.destroy();\n        });\n\t}\n\n\topen(images: any, config: any = {}){\n\t\tconfig = this.applyConfigDefaults(defaultConfig, config);\n\t\tlet data = {\n\t\t\timages, \n\t\t\tconfig\n\t\t};\n        let component = this.getLightboxComponent();\n        \n\t\tthis.appendComponentToBody(component, data);\n\t}\n\n\tgetLightboxComponent(){\n\t\treturn !this.isMobile ? LightboxComponent : LightboxMobileComponent;\n\t}\n\n\tapplyConfigDefaults(defaultConfig, config){\n\t\tif (!config.index){ \n\t\t\tconfig.index = 0;\n\t\t}\n\t\treturn Object.assign(defaultConfig, config);\n\t}\n}","import { Component, Input, OnInit, ElementRef, ViewChild } from '@angular/core';\nimport { CrystalLightbox } from'./dom.service'\n\n@Component({\n\tselector: 'crystal-gallery', \n\ttemplate: `<div #contentWrapper [hidden]=\"isNgContent\">\n    <ng-content></ng-content>\n</div>\n\n<masonry-layout \n    class=\"cg-wrapper\"\n    *ngIf=\"!isNgContent\" \n\n    [max-height]=\"masonryMaxHeight\" \n    [gutter]=\"masonryGutter\"\n    [masonry]=\"masonryState\"\n    [class-name]=\"'cg-image'\"\n    [images]=\"images\"\n    (events)=\"handleMasonryLayoutEvents($event)\"></masonry-layout>`,\n    styles: [`:host{display:block;width:100%}:host .cg-wrapper{display:block;width:100%;overflow:hidden}:host .cg-wrapper.cg-show{height:auto;position:relative;display:table}:host .cg-image img{cursor:pointer;width:100%}`],\n})\nexport class GalleryComponent {\n\n    @Input('images') images: any;\n    @Input('config') config: any = {};\n\n    @ViewChild('contentWrapper') contentWrapper: ElementRef;\n\n    get isNgContent(){\n        return this.contentWrapper.nativeElement.children.length > 0;\n    }\n\n    get masonryState(){\n        return this.config.masonry;\n    }\n\n    get masonryMaxHeight(){\n    \treturn this.config.masonryMaxHeight;\n    }\n\n    get masonryGutter(){\n    \treturn this.config.masonryGutter;\n    }\n\n\tconstructor(\n\t\tprivate lightbox: CrystalLightbox,\n\t\tprivate elementRef: ElementRef\n\t) {}\n\n\tshowLightbox(images: any, i: number){\n        this.config.index = i;\n\t\tthis.lightbox.open(images, this.config);\n\t}\n\n    handleMasonryLayoutEvents(event){\n        this.showLightbox(this.images, event.index);\n    }\n}","import { Component, ElementRef, HostListener, Input, Output, OnInit, OnChanges, EventEmitter } from '@angular/core';\n\nexport interface Image {\n    path: string; \n    width: number; \n    height: number;\n    computedHeight?: string;\n    computedWidth?: string;\n    margin?: string;\n};\n\nexport interface Images extends Array<Image>{}\n\n@Component({\n    selector: 'masonry-layout', \n    template: `<div \n\t[ngClass]=\"CLASS_NAME\"\n\t*ngFor=\"let image of images; let i = index;\"\n    [style.width]=\"image.computedWidth\"\n    [style.height]=\"image.computedHeight\"\n    [style.float]=\"'left'\"\n    [style.margin]=\"image.margin\"\n    [style.background]=\"'#eeeeee'\"\n    [style.lineHeight]=\"0\">\n\t<img \n        #imageElem\n        [src]=\"image.preview || image.full\" \n        [style.width.%]=\"100\" \n        [style.height]=\"'auto'\"\n        [style.opacity]=\"0\"\n        (click)=\"clickOnImage(image, i)\"\n        (load)=\"onImageLoaded(imageElem)\" />\n</div>`,\n})\n\nexport class MasonryLayoutComponent {\n    GUTTER: number = 0;\n    nodes: any;\n    elem: any;\n    savedNodeDimensions: any = [];\n    observer: any;\n    gridState: string = 'not started';\n    resizeTimer: any;\n    changesTimer: any;\n\n    @Input('images') images: Images; \n    @Input('masonry') ENABLE_MASONRY: boolean = true; \n    @Input('max-height') MAX_HEIGHT: number = 400; \n    @Input('class-name') CLASS_NAME: string | { [key: string]: any; };\n\n    @Input('gutter')\n    set gutter(value: number){\n        this.GUTTER = value / 2;\n    }\n\n    @Output() events: EventEmitter<any> = new EventEmitter<any>();\n     \n    get isMobile():boolean {\n        var check = false;\n        (function(a){if(/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0,4))) check = true;})(navigator.userAgent||navigator.vendor);\n        return check;\n    };\n     \n    constructor(private elementRef: ElementRef){\n        this.elem = this.elementRef.nativeElement;\n    }\n\n    @HostListener('window:resize', ['$event'])\n    onWindowResize(event) {\n        clearTimeout(this.resizeTimer);\n\n        this.resizeTimer = setTimeout(() => {\n            this.gridState = 'not started';\n            this.buildGrid(); \n        }, 250);\n    }\n\n    ngOnInit() {\n        this.buildGrid();\n    }\n\n    ngOnChanges(){\n        clearTimeout(this.changesTimer);\n\n        this.changesTimer = setTimeout(() => {\n            this.gridState = 'not started';\n            this.buildGrid(); \n        }, 250);\n    }\n\n    buildGrid(){\n        let parentWidth = Math.floor(this.elem.parentNode.offsetWidth);\n        let totalRowWidth: any = 0; \n        let row: any = {\n            startIndex: 0,\n            endIndex: 0,\n            length: 0,\n            totalWidth: 0\n        };\n\n        if (!this.images || !this.images.length){\n            return;\n        }\n\n        this.elem.style.width = parentWidth +'px';\n        this.elem.style.display = 'table';\n\n        this.images.forEach((node, index) => {\n            if (row.totalWidth === 0){\n                row.startIndex = index;\n                row.length = 0;\n            }\n\n            row.length++;\n            row.totalWidth += this.getComputedWidth(index);\n            \n            if (row.totalWidth >= parentWidth || this.isLastChild(index)){\n                row.endIndex = index;\n                let scaling = row.totalWidth/parentWidth;\n\n                this.setColDimensions(scaling, row);\n                row.totalWidth = 0; \n            }\n        });\n    }\n\n    setColDimensions(scaling: number, row: any){\n        let totalRowWidth: any = 0;\n        let parentWidth = this.elem.parentNode.offsetWidth;\n        scaling = (scaling < 1) ? 1 : scaling;\n\n        this.images.forEach((node, index) => {\n            if (!this.ENABLE_MASONRY){\n                node.computedHeight = this.MAX_HEIGHT + 'px';\n                node.computedWidth = this.getComputedWidth(index) + 'px';\n                node.margin = this.getNodeMargin(parentWidth);\n                return;\n            }\n\n            if (index >= row.startIndex && index <= row.endIndex){\n                let nodeWidth;\n\n                // last image\n                if (index === row.endIndex && scaling > 1){ \n                    nodeWidth = (100 - totalRowWidth) - ((this.GUTTER * 2) / parentWidth * 100);\n                    node.computedWidth = 'calc('+nodeWidth+'%)';\n\n                    if (this.gridState === 'not started'){\n                        this.gridState = 'pre-building';\n\n                        setTimeout(() => {\n                            this.buildGrid();\n                        }, 100);\n                    }\n                } \n                else {\n                    nodeWidth = ((this.getComputedWidth(index) / scaling) / parentWidth * 100) - ((row.length * (this.GUTTER * 2)) * (this.getComputedWidth(index) / scaling) / parentWidth) / parentWidth * 100;\n                    node.computedWidth = 'calc('+nodeWidth+'%)';\n                    \n                    totalRowWidth += nodeWidth;\n                    totalRowWidth += (this.GUTTER / parentWidth * 100) * 2;  \n                }\n\n                // last row and last image\n                if (index === row.endIndex && row.length === 1 && this.isMobile){\n                \tnodeWidth = 100 - ((this.GUTTER * 2) / parentWidth * 100);\n                    let height = node.height * ( parentWidth * (nodeWidth / 100) / node.width);\n\n                    if (height/2 < this.MAX_HEIGHT){\n                        node.computedWidth = 'calc('+nodeWidth+'%)';\n                    }\n                }\n\n                node.margin = this.getNodeMargin(parentWidth);\n                node.computedHeight = node.height * ( parentWidth * (nodeWidth / 100) / node.width) + 'px';\n            }\n        });\n    }\n\n    getComputedWidth(index: number){\n        return this.images[index].width / (this.images[index].height / this.MAX_HEIGHT);\n    }\n\n    isLastChild(index: number){\n        return index + 1 === this.images.length;\n    }\n\n    getNodeMargin(parentWidth: number){\n        return 'calc('+this.GUTTER / parentWidth * 100+'%)';\n    }\n\n    clickOnImage(image: any, i: number){\n        this.events.emit({\n            type: 'click-on-image',\n            image: image,\n            index: i\n        });\n    }\n\n    onImageLoaded(elem){\n        elem.style.opacity = 1;\n    }\n}","import { Directive, ElementRef, HostListener, Input, Output, EventEmitter } from '@angular/core';\n\n@Directive({\n    selector: '[pinch]'\n})\n\nexport class PinchDirective{\n\n    elem: any;\n    eventType: any;\n\n    scale: any = 1;\n    initialScale: any = 1;\n\n    startX: any;\n    startY: any;\n\n    moveX: any = 0;\n    moveY: any = 0;\n    initialMoveX: any = 0;\n    initialMoveY: any = 0;\n\n    moveXC: any;\n    moveYC: any;\n\n    distance: any;\n    initialDistance: any;\n\n    isNextImageLoaded: any = true;\n\n    @Input() isLast: any;\n    @Input() isFirst: any;\n\n    @Output() events = new EventEmitter<boolean>();\n     \n    constructor(private elementRef: ElementRef){\n        this.elem = this.elementRef.nativeElement;\n    }\n\n    @HostListener('touchstart', ['$event'])\n    touchstartHandler(event) {\n        this.elem.style.transformOrigin = '0 0';\n    }\n\n    @HostListener('touchmove', ['$event'])\n    touchmoveHandler(event) {\n        let touches = event.touches;\n\n        if (touches.length === 1 && this.scale === 1 && !this.eventType || this.eventType == 'swipe'){\n            event.preventDefault();\n\n            if (!this.isNextImageLoaded) {\n                return;\n            }\n\n            if (!this.eventType){\n                this.startX = event.touches[0].pageX;\n                this.startY = event.touches[0].pageY;\n            }\n\n            this.eventType = 'swipe';\n\n            this.moveX = this.initialMoveX + (event.touches[0].pageX - this.startX);\n            this.moveY = 0;\n\n            this.transformElem(0);\n        }\n    }\n\n    @HostListener('touchend', ['$event'])\n    touchendHandler(event) {\n        let touches = event.touches;\n        let img = this.elem.getElementsByTagName(\"img\")[0];\n\n        if (!this.isNextImageLoaded) {\n            return;\n        }\n        \n        if (this.scale < 1){\n            this.scale = 1;\n        }\n        if (this.moveY > 0){\n            this.moveY = 0;\n        } \n\n        if (this.moveX > 100){\n            this.slide('prev');\n        } else if (this.moveX < -100){\n            this.slide('next');\n        } else {\n            this.moveX = 0;\n        }\n\n        this.initialScale = this.scale;\n        this.initialMoveX = this.moveX;\n        this.initialMoveY = this.moveY;\n\n        this.transformElem(200); \n\n        this.eventType = 'touchend';        \n        if (touches.length == 0){\n            this.eventType = '';\n        }\n    }\n\n    slide(event: any){\n        this.onSlide(event);\n\n        if (event === 'prev'){\n            this.moveX = window.innerWidth + 8; \n            if (this.isFirst){\n                this.moveX = 0;\n            }\n        }\n        if (event === 'next'){\n            this.moveX = -window.innerWidth - 8;\n            if (this.isLast){\n                this.moveX = 0;\n            }\n        }\n\n        this.isNextImageLoaded = false;\n\n        setTimeout(() => {\n            this.moveX = 0;\n            this.initialMoveX = 0;\n            this.isNextImageLoaded = true;\n        }, 200);\n    }\n\n    onSlide(evenType:any) {\n        this.events.emit(evenType);\n    }\n\n    transformElem(duration: any = 50){\n        let matrixVal = 'matrix('+ Number(this.scale) +','+ 0 +','+ 0 +','+ Number(this.scale) +','+ Number(this.moveX) +','+ Number(this.moveY) +')';\n        \n        this.elem.style.transition = 'all '+ duration +'ms';\n        this.elem.style.transform = matrixVal;\n        this.elem.style.webkitTransform = matrixVal;\n    }\n}","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { LightboxComponent } from './lightbox.component';\nimport { LightboxMobileComponent } from './lightbox-mobile.component';\nimport { GalleryComponent } from './gallery.component';\nimport { CrystalLightbox } from'./dom.service' \nimport { MasonryLayoutComponent } from './masonry-layout.component'; \nimport { PinchDirective } from './pinch.directive'; \n\n@NgModule({\n    declarations: [\n        LightboxComponent,\n        LightboxMobileComponent,\n        GalleryComponent,\n        MasonryLayoutComponent,\n        PinchDirective\n    ],\n    imports: [\n        CommonModule\n    ],\n    exports: [\n        GalleryComponent\n    ],\n    providers: [\n        CrystalLightbox\n    ],\n    bootstrap: [\n        \n    ],\n    entryComponents: [\n        LightboxComponent,\n        LightboxMobileComponent\n    ]\n})\nexport class CrystalGalleryModule { }\n"]}